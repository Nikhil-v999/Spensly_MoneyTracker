{% include "header.html" %}


{% from "bootstrap5/form.html" import render_form %}



<div class="container my-4">


<div class="container my-5 pt-4"></div>


  <div class="d-flex justify-content-between align-items-center mb-3">

    <div class="d-flex align-items-center gap-3">
  <a href="{{ url_for('dashboard') }}"
     class="back-btn d-flex align-items-center justify-content-center">
    <i class="fas  fa-arrow-left "></i>
  </a>

  <div>
    <h3 class="mb-0">Transactions</h3>
    <p class="text-muted mb-0">View and manage your expenses</p>
  </div>
</div>

  </div>








  <div class="card border-0 shadow-sm mb-4">
  <div class="card-body py-3">
    <form method="GET" class="row g-2 align-items-end">

      <div class="col-md-3">
        <label class="form-label medium ">Category</label>

        <select name="category" class="form-select form-select-sm">

          <option value="">All Categories</option>
          <option>Food & Dining</option>
          <option>Transportation</option>
          <option>Entertainment</option>
          <option>Personal Care</option>
          <option>Clothing</option>
          <option>Other</option>
        </select>
      </div>

      <div class="col-md-2">
        <label class="form-label medium ">Start Date</label>
        <input type="date" name="start_date" class="form-control form-control-sm">
      </div>

      <div class="col-md-2">
        <label class="form-label medium ">End Date</label>
        <input type="date" name="end_date" class="form-control form-control-sm">
      </div>

      <div class="col-md-3">
        <label class="form-label large ">Sort By</label>
        <select name="sort" class="form-select form-select-sm">
          <option value="date_desc">Newest First</option>
          <option value="date_asc">Oldest First</option>
          <option value="amount_desc">Amount: High → Low</option>
          <option value="amount_asc">Amount: Low → High</option>
        </select>
      </div>

      <div class="col-md-2 text-end">
        <button type="submit" class="btn btn-sm btn-dark w-100">
          Apply
        </button>
      </div>

    </form>
  </div>
</div>
<table class="table table-hover align-middle mb-0 transactions-table">

  <thead class="table-light">
    <tr>
      <th>Date</th>
      <th>Category</th>
      <th>Description</th>
      <th class="text-end">Amount</th>
      <th class="text-end">Actions</th>
    </tr>
  </thead>
  <tbody>
    {% for e in all_expenses %}
    <tr>
<!--      <td class="text-muted">{{ e.date }}</td>-->
      <td class="text-muted">
  {{ e.date.strftime("%d %b %Y") }}
</td>

      <td>
        <span class="badge bg-light text-dark">
          {{ e.category }}
        </span>
      </td>
      <td class="description-cell" title="{{ e.description }}">
  {{ e.description or "—" }}
</td>

      <td class="text-end fw-bold">
        ₹{{ "%.2f"|format(e.amount) }}
      </td>
      <td class="text-end">
<!--        <a href="{{ url_for('edit_expense', expense_id=e.id) }}"-->
<!--           class="btn btn-sm btn-link text-secondary">-->
<!--          Edit-->
<!--        </a>-->
<!--        <a href="{{ url_for('delete_expense', expense_id=e.id) }}"-->
<!--           class="btn btn-sm btn-link text-danger"-->
<!--           onclick="return confirm('Delete this expense?');">-->
<!--          Delete-->
<!--        </a>-->
        <a href="{{ url_for('edit_expense', expense_id=e.id) }}"
   class="btn btn-sm btn-outline-secondary me-1">
  Edit
</a>

<a href="{{ url_for('delete_expense', expense_id=e.id) }}"
   class="btn btn-sm btn-outline-danger"
   onclick="return confirm('Delete this expense?');">
  Delete
</a>

      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>

<!-- keep everything else here -->
</div>

{% include "footer.html" %}